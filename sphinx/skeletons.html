

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Contributing Your Own Skeletons &mdash; drom master
 (2ffba85
) (2021/12/16 09:26) documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/fixes.css" type="text/css" />
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Copyright and License" href="license.html" />
    <link rel="prev" title="How to install" href="install.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> drom
          

          
          </a>

          
            
            
              <div class="version">
                master
 (2ffba85
)
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://ocamlpro.github.io/drom">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Project Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">Sub-commands and Arguments</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">User Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="github.html">Github Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="licenses.html">Managing Licenses</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">How to install</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributing Your Own Skeletons</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#skeleton-locations">Skeleton Locations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-skeleton-format">The Skeleton Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-skeleton-substitution-language">The Skeleton Substitution Language</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#brace-substitutions">Brace Substitutions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#paren-substitutions-project-and-package-fields">Paren Substitutions (project and package fields)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bracket-substitutions">Bracket Substitutions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://ocamlpro.github.io/drom/doc">API doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Copyright and License</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/ocamlpro/drom">Devel and Issues on Github</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">drom</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Contributing Your Own Skeletons</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/skeletons.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="contributing-your-own-skeletons">
<span id="contributing-skeletons"></span><h1>Contributing Your Own Skeletons<a class="headerlink" href="#contributing-your-own-skeletons" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>There are 2 kinds of skeletons used to create and update <code class="code docutils literal notranslate"><span class="pre">drom</span></code>
project:</p>
<ul class="simple">
<li><em>project skeletons</em> define a whole project composed of one or more packages</li>
<li><em>package skeletons</em> define only one package, corresponding to every opam
package generated in the project</li>
</ul>
<p><code class="code docutils literal notranslate"><span class="pre">drom</span></code> comes with a set of predefined skeletons. Users can
contribute their own skeletons, either by adding them to their local
configuration, or by submitting them to the <code class="code docutils literal notranslate"><span class="pre">drom</span></code> project.</p>
</div>
<div class="section" id="skeleton-locations">
<h2>Skeleton Locations<a class="headerlink" href="#skeleton-locations" title="Permalink to this headline">¶</a></h2>
<p>When building its set of skeletons, <code class="code docutils literal notranslate"><span class="pre">drom</span></code> will search them in two
directories:</p>
<ul class="simple">
<li>A system directory. It is the first existing one in the following list:<ul>
<li><code class="code docutils literal notranslate"><span class="pre">$DROM_SHARE_DIR/skeletons/</span></code>, i.e. using the <code class="code docutils literal notranslate"><span class="pre">$DROM_SHARED_DIR</span></code> environment variable</li>
<li>any directory <code class="code docutils literal notranslate"><span class="pre">./share/drom/skeletons/</span></code> in one of the ancestor directories (<code class="code docutils literal notranslate"><span class="pre">.</span></code>, <code class="code docutils literal notranslate"><span class="pre">..</span></code>, <code class="code docutils literal notranslate"><span class="pre">../..</span></code>, etc.). This is used to test new skeletons directly from <code class="code docutils literal notranslate"><span class="pre">drom</span></code> sources.</li>
<li><code class="code docutils literal notranslate"><span class="pre">$OPAMROOT/plugins/opam-drom/skeletons/</span></code>, where <code class="code docutils literal notranslate"><span class="pre">$OPAMROOT</span></code> defaults to <code class="code docutils literal notranslate"><span class="pre">$HOME/.opam/</span></code> if undefined. This is used when <code class="code docutils literal notranslate"><span class="pre">drom</span></code> is installed as an <code class="code docutils literal notranslate"><span class="pre">opam</span></code> plugin, but can also be used when installed globally by the user.</li>
<li><code class="code docutils literal notranslate"><span class="pre">$OPAM_SWITCH_PREFIX/share/drom/skeletons/</span></code>. This is used when <code class="code docutils literal notranslate"><span class="pre">drom</span></code> is installed in the local switch only.</li>
<li><code class="code docutils literal notranslate"><span class="pre">${share-dir}/skeletons</span></code>, where <code class="code docutils literal notranslate"><span class="pre">${share-dir}</span></code> is the value of that variable in the user configuration file (<code class="code docutils literal notranslate"><span class="pre">$HOME/.config/drom/config</span></code>)</li>
</ul>
</li>
<li>A user directory: <code class="code docutils literal notranslate"><span class="pre">$HOME/.config/drom/skeletons/</span></code></li>
</ul>
<p>If a skeleton exists in both directories, the one in the user directory overwrites the one in the system directory. <code class="code docutils literal notranslate"><span class="pre">drom</span></code> will then complain about it.</p>
</div>
<div class="section" id="the-skeleton-format">
<h2>The Skeleton Format<a class="headerlink" href="#the-skeleton-format" title="Permalink to this headline">¶</a></h2>
<p>The <code class="code docutils literal notranslate"><span class="pre">skeletons/</span></code> folder is divided in two directories
<code class="code docutils literal notranslate"><span class="pre">projects/</span></code> and <code class="code docutils literal notranslate"><span class="pre">packages/</span></code> for the two kinds of skeletons.</p>
<p>Each directory contains one directory per skeleton, containing the
following files:</p>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">skeleton.toml</span></code>: some information on the skeleton (name,
inheritance, additionnal information on files)</li>
<li><code class="code docutils literal notranslate"><span class="pre">files/</span></code>: the template files, that will be instantiated for
that skeleton. For a project skeleton, the files are expected to be
instantiated at the root of the project (<code class="code docutils literal notranslate"><span class="pre">drom.toml</span></code>
location). For a package skeleton, the files are expected to be
instantiated in the package directory (<code class="code docutils literal notranslate"><span class="pre">package.toml</span></code> location)</li>
<li><code class="code docutils literal notranslate"><span class="pre">project.toml</span></code>: for project skeletons, this file contains an
initial configuration for the project variables and packages. If the
skeleton is inherited from another one, the ancester configuration
is completed with the child configuration, with priority to the
child configuration, and so recursively. Note that this file
contains also the configuration of the packages, since no package
configuration is read from package skeletons for now.</li>
<li><code class="code docutils literal notranslate"><span class="pre">package.toml</span></code>: this file is not used.</li>
</ul>
<p>Let’s take an excerpt of a <code class="code docutils literal notranslate"><span class="pre">skeleton.toml</span></code> file:</p>
<div class="highlight-ocaml notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="n">skeleton</span><span class="o">]</span>
<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;program&quot;</span>
<span class="n">inherits</span> <span class="o">=</span> <span class="s2">&quot;virtual&quot;</span>

<span class="o">[</span><span class="n">file</span><span class="o">]</span>
<span class="s2">&quot;Makefile&quot;</span> <span class="o">=</span> <span class="o">{</span> <span class="n">skips</span> <span class="o">=</span> <span class="o">[</span> <span class="s2">&quot;make&quot;</span> <span class="o">]</span> <span class="o">}</span>
<span class="s2">&quot;dune-project_&quot;</span> <span class="o">=</span> <span class="o">{</span> <span class="n">file</span> <span class="o">=</span> <span class="s2">&quot;dune-project&quot;</span><span class="o">,</span> <span class="n">skips</span> <span class="o">=</span> <span class="o">[</span> <span class="s2">&quot;dune&quot;</span> <span class="o">]</span> <span class="o">}</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The file contains the following fields:</p>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">name</span></code> (mandatory): the name of the skeleton</li>
<li><code class="code docutils literal notranslate"><span class="pre">inherits</span></code> (optional): the name of a skeleton from which this
skeleton inherits</li>
<li><code class="code docutils literal notranslate"><span class="pre">[file]</span></code> section (optional): a set of fields to configure the
use of one of the files in the <code class="code docutils literal notranslate"><span class="pre">files/</span></code> directory. Currently,
the following fields are availble:<ul>
<li><code class="code docutils literal notranslate"><span class="pre">file</span></code>: the name under which the file should be
instantiated. This is useful if you cannot use the real name of
the file in the skeleton, for example because the name would
conflict with tools used in the project (dot files, <code class="code docutils literal notranslate"><span class="pre">dune</span></code>
files, etc)</li>
<li><code class="code docutils literal notranslate"><span class="pre">skips</span></code>: a list of tags that can be used in the
<code class="code docutils literal notranslate"><span class="pre">drom.toml</span></code> <code class="code docutils literal notranslate"><span class="pre">skip</span></code> option or <code class="code docutils literal notranslate"><span class="pre">--skip</span></code> argument to
skip this file.</li>
<li><code class="code docutils literal notranslate"><span class="pre">create</span></code>: whether the file should only be created if it
doesn’t exist yet (<code class="code docutils literal notranslate"><span class="pre">true</span></code>) or every time (<code class="code docutils literal notranslate"><span class="pre">false</span></code>,
default).</li>
<li><code class="code docutils literal notranslate"><span class="pre">subst</span></code>: whether substitutions should happen on the file
(<code class="code docutils literal notranslate"><span class="pre">true</span></code>, default) or not (<code class="code docutils literal notranslate"><span class="pre">false</span></code>). Useful for binary
files for example to avoid accidental substitutions.</li>
<li><code class="code docutils literal notranslate"><span class="pre">skip</span></code>: whether the file should be always skipped
(<code class="code docutils literal notranslate"><span class="pre">true</span></code>) or not (<code class="code docutils literal notranslate"><span class="pre">false</span></code>, default). Useful for a
documentation file in the skeleton files.</li>
<li><code class="code docutils literal notranslate"><span class="pre">record</span></code>: whether the file should recorded in <code class="code docutils literal notranslate"><span class="pre">git</span></code>
files and in the <code class="code docutils literal notranslate"><span class="pre">.drom</span></code> state file (<code class="code docutils literal notranslate"><span class="pre">true</span></code>,
default). Useful for documentation files that are only to help the
user, not to remain in the project.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="the-skeleton-substitution-language">
<h2>The Skeleton Substitution Language<a class="headerlink" href="#the-skeleton-substitution-language" title="Permalink to this headline">¶</a></h2>
<p>Substitutions are performed on files in skeletons if the <code class="code docutils literal notranslate"><span class="pre">subst</span></code>
field is not set to <code class="code docutils literal notranslate"><span class="pre">false</span></code> in the <code class="code docutils literal notranslate"><span class="pre">skeleton.toml</span></code> file
(see above).</p>
<p>There are 3 kinds of substitutions happening:</p>
<ul class="simple">
<li>Brace substitutions (<code class="code docutils literal notranslate"><span class="pre">!{xxx}</span></code>): these substitutions are
hardcoded in <code class="code docutils literal notranslate"><span class="pre">drom</span></code> to generate specific information for the
project or package.</li>
<li>Paren substitutions (<code class="code docutils literal notranslate"><span class="pre">!(xxx)</span></code>): these substitutions replace
the variable with its value, respectively, for a project, in the
<code class="code docutils literal notranslate"><span class="pre">[fields]</span></code> section of the <code class="code docutils literal notranslate"><span class="pre">drom.toml</span></code>, or for a package,
in the <code class="code docutils literal notranslate"><span class="pre">[fields]</span></code> section of the <code class="code docutils literal notranslate"><span class="pre">package.toml</span></code> or in
the <code class="code docutils literal notranslate"><span class="pre">[package.fields]</span></code> section of the package in the
<code class="code docutils literal notranslate"><span class="pre">drom.toml</span></code> file.</li>
<li>Bracket substitutions (<code class="code docutils literal notranslate"><span class="pre">![xxx]</span></code>): these substitutions always
return an empty string. They are used for side-effects on the
substitutions (conditional substitutions, setting flags, etc.)</li>
</ul>
<p>Brace and paren substitutions can be combined with encodings by using
a <code class="code docutils literal notranslate"><span class="pre">:ENCODING</span></code> extension. For example, <code class="code docutils literal notranslate"><span class="pre">!{name:upp}</span></code> is
replaced by the name of the project/package in uppercase.</p>
<p>The following encodings are available:
* <code class="code docutils literal notranslate"><span class="pre">html</span></code>: html encoding (<code class="code docutils literal notranslate"><span class="pre">&amp;</span></code> is replaced by <code class="code docutils literal notranslate"><span class="pre">&amp;amp;</span></code>, etc.)
* <code class="code docutils literal notranslate"><span class="pre">cap</span></code>: set the first char to uppercase
* <code class="code docutils literal notranslate"><span class="pre">uncap</span></code>: set the first char to lowercase
* <code class="code docutils literal notranslate"><span class="pre">low</span></code>: lowercase
* <code class="code docutils literal notranslate"><span class="pre">uncap</span></code>: uppercase
* <code class="code docutils literal notranslate"><span class="pre">alpha</span></code>: replace all non-alpha chars by underscores</p>
<p>For <em>package</em> substitutions, brace and paren substitutions for the
<em>project</em> are used if no substitution was found for the <em>package</em>. It
is possible to force <em>project</em> substitution in a <em>package</em> using the
<code class="code docutils literal notranslate"><span class="pre">project-</span></code> prefix (<code class="code docutils literal notranslate"><span class="pre">!{project-name}</span></code> for example in a
package file for the <code class="code docutils literal notranslate"><span class="pre">name</span></code> substitution of the
project). Reciprocally, it is possible to use a <code class="code docutils literal notranslate"><span class="pre">package-</span></code>
prefix in a Paren (field) substitution to prevent a project
substitution if the field is not defined in the package.</p>
<div class="section" id="brace-substitutions">
<h3>Brace Substitutions<a class="headerlink" href="#brace-substitutions" title="Permalink to this headline">¶</a></h3>
<p>The ultimate source of information for Brace substitutions is the
<a class="reference external" href="https://github.com/OCamlPro/drom/blob/master/src/drom_lib/subst.ml">subst.ml module</a>
in the <code class="code docutils literal notranslate"><span class="pre">project_brace</span></code> and <code class="code docutils literal notranslate"><span class="pre">package_brace</span></code> fuctions.</p>
<p>Currently, the following <em>project</em> substitutions are available:</p>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">!{escape:true}</span></code>… <code class="code docutils literal notranslate"><span class="pre">!{escape:false}</span></code>: makes <code class="code docutils literal notranslate"><span class="pre">\!{</span></code>
be replaced by <code class="code docutils literal notranslate"><span class="pre">!{</span></code> instead of starting a substitution.</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{name}</span></code>: the project name</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{synopsis}</span></code>: the project synopsis</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{description}</span></code>: the project description</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{version}</span></code>: the project version</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{edition}</span></code>: the default OCaml version to use</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{min-edition}</span></code>: the minimal OCaml version</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{github-organization}</span></code>: the current github-organization</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{authors-as-strings}</span></code>: the list of authors</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{authors-for-toml}</span></code>: the list of authors in TOML</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{authors-ampersand}</span></code>: the authors separated by ampersands</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{copyright}</span></code>: the project copyright</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{license}</span></code>: the project full license file</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{license-name}</span></code>: the SPDF name of the project license</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{header-ml}</span></code>: the header for an ML file (also MLL file)</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{header-c}</span></code>: the header for a C file (also MLY file)</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{year}</span></code>, <code class="code docutils literal notranslate"><span class="pre">!{month}</span></code>, <code class="code docutils literal notranslate"><span class="pre">!{day}</span></code>: current date</li>
<li>There are many other substitutions, for example specific to Dune
files (like <code class="code docutils literal notranslate"><span class="pre">!{dune-packages}</span></code> for the <code class="code docutils literal notranslate"><span class="pre">dune-project</span></code>
file). Some of them will disappear because they can be generated
using conditionals (<code class="code docutils literal notranslate"><span class="pre">![if:...]</span></code>, see bracket substitutions),
some of them will be documented later (TODO).</li>
</ul>
<p>Currently, the following <em>package</em> substitutions are available:</p>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">!{name}</span></code>: the package name</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{dir}</span></code>: the package dir</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{skeleton}</span></code>: the package skeleton</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{library-name}</span></code>: the package library name (uncapitalized version of
the <code class="code docutils literal notranslate"><span class="pre">pack</span></code> option or underscorified version of the package name)</li>
<li><code class="code docutils literal notranslate"><span class="pre">!{library-module}</span></code>: the package module name (<code class="code docutils literal notranslate"><span class="pre">pack</span></code> option
or capitalized version of the package name)</li>
</ul>
</div>
<div class="section" id="paren-substitutions-project-and-package-fields">
<h3>Paren Substitutions (project and package fields)<a class="headerlink" href="#paren-substitutions-project-and-package-fields" title="Permalink to this headline">¶</a></h3>
<p>Paren substitutions are substituted by the <code class="code docutils literal notranslate"><span class="pre">[fields]</span></code> variables
in the project/package description files. If the field is not defined,
the substitution is replaced by the empty string. Such fields are
often used for trailers in generated files, to keep using <code class="code docutils literal notranslate"><span class="pre">drom</span></code>
to update them while still adding specific information by hand.</p>
<p>Currently, the following paren substitutions are used in <em>project</em>
skeletons:</p>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">!(dot-gitignore-trailer)</span></code>: a trailer added at the end of the
<code class="code docutils literal notranslate"><span class="pre">.gitignore</span></code> file</li>
<li><code class="code docutils literal notranslate"><span class="pre">!(dune-dirs)</span></code>: a string added in the <code class="code docutils literal notranslate"><span class="pre">(dirs</span> <span class="pre">...)</span></code>
stanza of the root <code class="code docutils literal notranslate"><span class="pre">dune</span></code> files to specify which dirs should
be scanned.</li>
<li><code class="code docutils literal notranslate"><span class="pre">!(makefile-trailer)</span></code>: a trailer added at the end of the
generated <code class="code docutils literal notranslate"><span class="pre">Makefile</span></code></li>
</ul>
<p>Currently, the following paren substitutions are used in <em>package</em>
skeletons:</p>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">!(dune-libraries)</span></code>: a string added in the <code class="code docutils literal notranslate"><span class="pre">(libraries</span>
<span class="pre">...)</span></code> stanza of the generated <code class="code docutils literal notranslate"><span class="pre">dune</span></code> file</li>
<li><code class="code docutils literal notranslate"><span class="pre">!(dune-stanzas)</span></code>: a string added in the <code class="code docutils literal notranslate"><span class="pre">(executable</span>
<span class="pre">...)</span></code> or <code class="code docutils literal notranslate"><span class="pre">(library</span> <span class="pre">...)</span></code> stanza of the generated
<code class="code docutils literal notranslate"><span class="pre">dune</span></code> file</li>
<li><code class="code docutils literal notranslate"><span class="pre">!(dune-trailer)</span></code>: a string added at the end of the generated
<code class="code docutils literal notranslate"><span class="pre">dune</span></code> file</li>
</ul>
</div>
<div class="section" id="bracket-substitutions">
<h3>Bracket Substitutions<a class="headerlink" href="#bracket-substitutions" title="Permalink to this headline">¶</a></h3>
<p>The following bracket substitutions are currently available:</p>
<ul class="simple">
<li><code class="code docutils literal notranslate"><span class="pre">![if:CONDITION]</span></code>… <code class="code docutils literal notranslate"><span class="pre">![else]</span></code> … <code class="code docutils literal notranslate"><span class="pre">![fi]</span></code>:
depending on the condition, replace by the first or second part.
The condition can be:<ul>
<li><code class="code docutils literal notranslate"><span class="pre">not:CONDITION</span></code>: negation of a condition</li>
<li><code class="code docutils literal notranslate"><span class="pre">skip:TAG</span></code>: true if the tag should be skipped</li>
<li><code class="code docutils literal notranslate"><span class="pre">gen:TAG</span></code>: true if the tag should not be skipped</li>
<li><code class="code docutils literal notranslate"><span class="pre">true</span></code> and <code class="code docutils literal notranslate"><span class="pre">false</span></code>: constants</li>
<li><code class="code docutils literal notranslate"><span class="pre">skeleton:is:SKELETON</span></code>: true is the current skeleton is the argument</li>
<li><code class="code docutils literal notranslate"><span class="pre">kind:is:KIND</span></code>: true if the kind of the <em>package</em> is the argument (kind is one of <code class="code docutils literal notranslate"><span class="pre">library</span></code>, <code class="code docutils literal notranslate"><span class="pre">program</span></code> or <code class="code docutils literal notranslate"><span class="pre">virtual</span></code>)</li>
<li><code class="code docutils literal notranslate"><span class="pre">pack</span></code>: true if the <em>package</em> should be packed</li>
<li><code class="code docutils literal notranslate"><span class="pre">windows-ci</span></code>: true if the <em>project</em> should run Windows CI</li>
<li><code class="code docutils literal notranslate"><span class="pre">github-organization</span></code>, <code class="code docutils literal notranslate"><span class="pre">homepage</span></code>, <code class="code docutils literal notranslate"><span class="pre">copyright</span></code>, <code class="code docutils literal notranslate"><span class="pre">bug-reports</span></code>, <code class="code docutils literal notranslate"><span class="pre">dev-repo</span></code>, <code class="code docutils literal notranslate"><span class="pre">doc-gen</span></code>, <code class="code docutils literal notranslate"><span class="pre">doc-api</span></code>, <code class="code docutils literal notranslate"><span class="pre">sphinx-target</span></code>, <code class="code docutils literal notranslate"><span class="pre">profile</span></code>: true if the corresponding value is defined for the project</li>
<li><code class="code docutils literal notranslate"><span class="pre">project:CONDITION</span></code>: in a <em>package</em>, check if the condition is true for the project instead</li>
</ul>
</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="license.html" class="btn btn-neutral float-right" title="Copyright and License" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral float-left" title="How to install" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright OCamlPro SAS &amp; Origin Labs SAS

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>